<assembly>
  <id>${deploy.env}</id>
  <formats>
    <format>war</format>
  </formats>
  <includeBaseDirectory>false</includeBaseDirectory>

  <fileSets>
    <!-- 前端静态文件 -->
    <fileSet>
      <directory>src/main/webapp</directory>
      <excludes>
        <exclude>page/templates/**</exclude>
      </excludes>
      <outputDirectory></outputDirectory>
    </fileSet>
    <fileSet>
      <directory>src/main/webapp/page/templates</directory>
      <outputDirectory>templates</outputDirectory>
    </fileSet>

    <!-- 项目类及配置文件 -->
    <fileSet>
      <directory>src/main/assembly/${deploy.env}</directory>
      <outputDirectory>WEB-INF/classes</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>target/classes</directory>
      <excludes>
        <exclude>application.properties</exclude>
        <exclude>jdbc.yml</exclude>
        <exclude>redis.properties</exclude>
      </excludes>
      <outputDirectory>WEB-INF/classes</outputDirectory>
    </fileSet>
    <!-- <fileSet> 注释原因：proguard打的jar包有问题
      <directory>target</directory>
      <includes>
        <include>${project.build.finalName}-proguard.jar</include>
      </includes>
      <outputDirectory>WEB-INF/lib</outputDirectory>
    </fileSet> -->
  </fileSets>

  <!-- 依赖jar包 -->
  <dependencySets>
    <dependencySet>
      <useProjectArtifact>false</useProjectArtifact>
      <outputDirectory>WEB-INF/lib</outputDirectory>
    </dependencySet>
  </dependencySets>

</assembly>
